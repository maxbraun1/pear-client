{"ast":null,"code":"import _slicedToArray from\"C:\\\\Dev\\\\MERN-Project\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useState,useEffect}from\"react\";import Axios from\"axios\";import Post from\"./post/post\";import{useNavigate,useSearchParams}from\"react-router-dom\";import classes from\"./postList.module.css\";import axios from\"axios\";import NoResults from\"../Misc/noResults.js\";import{jsx as _jsx}from\"react/jsx-runtime\";function PostList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),listOfPosts=_useState2[0],setListOfPosts=_useState2[1];var navigate=useNavigate();var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,2),searchParams=_useSearchParams2[0],setSearchParams=_useSearchParams2[1];useEffect(function(){checkParams(searchParams);},[searchParams]);return/*#__PURE__*/_jsx(\"div\",{className:classes.postList,children:listOfPosts.length>0?listOfPosts.map(function(post){return/*#__PURE__*/_jsx(Post,{postID:post},post);}):/*#__PURE__*/_jsx(NoResults,{})});function checkParams(param){if(param.get('sortBy')){sortBy(param.get('sortBy'));}else if(param.get('likes')){getLikedPosts();}else if(param.get('technology')){searchTechnology(param.get('technology'));}else if(param.get('category')){getByCategory(param.get('category'));}else if(param.get('postID')){setListOfPosts([param.get('postID')]);}else{getDefault();}}function searchTechnology(technology){axios.post(process.env.REACT_APP_API+\"/posts/search\",{pageNum:1,technology:technology}).then(function(response){handleResults(response.data);});}function sortBy(sortBy){axios.post(process.env.REACT_APP_API+\"/posts/sort\",{pageNum:1,sortBy:sortBy}).then(function(response){handleResults(response.data);});}function getLikedPosts(){axios.post(process.env.REACT_APP_API+\"/posts/liked\",{pageNum:1},{withCredentials:true}).then(function(response){handleResults(response.data);});}function getByCategory(category){axios.post(process.env.REACT_APP_API+\"/posts/category\",{pageNum:1,categoryID:category},{withCredentials:true}).then(function(response){handleResults(response.data);});}function getDefault(){axios.post(process.env.REACT_APP_API+\"/posts/default\",{pageNum:1}).then(function(response){handleResults(response.data);});}function handleResults(results){if(results.error){console.log(\"Error: \",results.errorMessage);}else{setListOfPosts(results);}}}export default PostList;","map":{"version":3,"sources":["C:/Dev/MERN-Project/client/src/components/posts/postList.js"],"names":["useState","useEffect","Axios","Post","useNavigate","useSearchParams","classes","axios","NoResults","PostList","listOfPosts","setListOfPosts","navigate","searchParams","setSearchParams","checkParams","postList","length","map","post","param","get","sortBy","getLikedPosts","searchTechnology","getByCategory","getDefault","technology","process","env","REACT_APP_API","pageNum","then","response","handleResults","data","withCredentials","category","categoryID","results","error","console","log","errorMessage"],"mappings":"yHAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,aAAjB,CACA,OAASC,WAAT,CAAsBC,eAAtB,KAA6C,kBAA7C,CACA,MAAOC,CAAAA,OAAP,KAAoB,uBAApB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,sBAAtB,C,2CAEA,QAASC,CAAAA,QAAT,EAAoB,CAClB,cAAsCT,QAAQ,CAAC,EAAD,CAA9C,wCAAOU,WAAP,eAAoBC,cAApB,eACA,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA,qBAAwCC,eAAe,EAAvD,sDAAOQ,YAAP,sBAAqBC,eAArB,sBAGAb,SAAS,CAAC,UAAM,CACdc,WAAW,CAACF,YAAD,CAAX,CACD,CAFQ,CAEN,CAACA,YAAD,CAFM,CAAT,CAIA,mBACE,YAAK,SAAS,CAAEP,OAAO,CAACU,QAAxB,UACIN,WAAW,CAACO,MAAZ,CAAqB,CAArB,CAAyBP,WAAW,CAACQ,GAAZ,CAAgB,SAACC,IAAD,qBAAW,KAAC,IAAD,EAAiB,MAAM,CAAEA,IAAzB,EAAWA,IAAX,CAAX,EAAhB,CAAzB,cAA0F,KAAC,SAAD,IAD9F,EADF,CAMA,QAASJ,CAAAA,WAAT,CAAqBK,KAArB,CAA4B,CAC1B,GAAGA,KAAK,CAACC,GAAN,CAAU,QAAV,CAAH,CAAuB,CACrBC,MAAM,CAACF,KAAK,CAACC,GAAN,CAAU,QAAV,CAAD,CAAN,CACD,CAFD,IAEM,IAAGD,KAAK,CAACC,GAAN,CAAU,OAAV,CAAH,CAAsB,CAC1BE,aAAa,GACd,CAFK,IAEA,IAAGH,KAAK,CAACC,GAAN,CAAU,YAAV,CAAH,CAA2B,CAC/BG,gBAAgB,CAACJ,KAAK,CAACC,GAAN,CAAU,YAAV,CAAD,CAAhB,CACD,CAFK,IAEA,IAAGD,KAAK,CAACC,GAAN,CAAU,UAAV,CAAH,CAAyB,CAC7BI,aAAa,CAACL,KAAK,CAACC,GAAN,CAAU,UAAV,CAAD,CAAb,CACD,CAFK,IAEA,IAAGD,KAAK,CAACC,GAAN,CAAU,QAAV,CAAH,CAAuB,CAC3BV,cAAc,CAAC,CAACS,KAAK,CAACC,GAAN,CAAU,QAAV,CAAD,CAAD,CAAd,CACD,CAFK,IAED,CACHK,UAAU,GACX,CACF,CAED,QAASF,CAAAA,gBAAT,CAA0BG,UAA1B,CAAqC,CACnCpB,KAAK,CAACY,IAAN,CAAWS,OAAO,CAACC,GAAR,CAAYC,aAAZ,CAA4B,eAAvC,CAAwD,CAAEC,OAAO,CAAE,CAAX,CAAcJ,UAAU,CAAVA,UAAd,CAAxD,EAAoFK,IAApF,CAAyF,SAACC,QAAD,CAAc,CACrGC,aAAa,CAACD,QAAQ,CAACE,IAAV,CAAb,CACD,CAFD,EAGD,CACD,QAASb,CAAAA,MAAT,CAAgBA,MAAhB,CAAuB,CACrBf,KAAK,CAACY,IAAN,CAAWS,OAAO,CAACC,GAAR,CAAYC,aAAZ,CAA4B,aAAvC,CAAsD,CAAEC,OAAO,CAAE,CAAX,CAAcT,MAAM,CAANA,MAAd,CAAtD,EAA8EU,IAA9E,CAAmF,SAACC,QAAD,CAAc,CAC/FC,aAAa,CAACD,QAAQ,CAACE,IAAV,CAAb,CACD,CAFD,EAGD,CACD,QAASZ,CAAAA,aAAT,EAAwB,CACtBhB,KAAK,CAACY,IAAN,CAAWS,OAAO,CAACC,GAAR,CAAYC,aAAZ,CAA4B,cAAvC,CAAuD,CAAEC,OAAO,CAAE,CAAX,CAAvD,CAAuE,CAACK,eAAe,CAAE,IAAlB,CAAvE,EAAgGJ,IAAhG,CAAqG,SAACC,QAAD,CAAc,CACjHC,aAAa,CAACD,QAAQ,CAACE,IAAV,CAAb,CACD,CAFD,EAGD,CACD,QAASV,CAAAA,aAAT,CAAuBY,QAAvB,CAAgC,CAC9B9B,KAAK,CAACY,IAAN,CAAWS,OAAO,CAACC,GAAR,CAAYC,aAAZ,CAA4B,iBAAvC,CAA0D,CAAEC,OAAO,CAAE,CAAX,CAAcO,UAAU,CAAED,QAA1B,CAA1D,CAAgG,CAACD,eAAe,CAAE,IAAlB,CAAhG,EAAyHJ,IAAzH,CAA8H,SAACC,QAAD,CAAc,CAC1IC,aAAa,CAACD,QAAQ,CAACE,IAAV,CAAb,CACD,CAFD,EAGD,CACD,QAAST,CAAAA,UAAT,EAAqB,CACnBnB,KAAK,CAACY,IAAN,CAAWS,OAAO,CAACC,GAAR,CAAYC,aAAZ,CAA4B,gBAAvC,CAAyD,CAAEC,OAAO,CAAE,CAAX,CAAzD,EAAyEC,IAAzE,CAA8E,SAACC,QAAD,CAAc,CAC1FC,aAAa,CAACD,QAAQ,CAACE,IAAV,CAAb,CACD,CAFD,EAGD,CAGD,QAASD,CAAAA,aAAT,CAAuBK,OAAvB,CAA+B,CAC7B,GAAGA,OAAO,CAACC,KAAX,CAAiB,CACfC,OAAO,CAACC,GAAR,CAAY,SAAZ,CAAuBH,OAAO,CAACI,YAA/B,EACD,CAFD,IAEK,CACHhC,cAAc,CAAC4B,OAAD,CAAd,CACD,CACF,CACF,CAED,cAAe9B,CAAAA,QAAf","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport Axios from \"axios\";\r\nimport Post from \"./post/post\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport classes from \"./postList.module.css\";\r\nimport axios from \"axios\";\r\nimport NoResults from \"../Misc/noResults.js\";\r\n\r\nfunction PostList() {\r\n  const [listOfPosts, setListOfPosts] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n\r\n\r\n  useEffect(() => {\r\n    checkParams(searchParams);\r\n  }, [searchParams]);\r\n\r\n  return (\r\n    <div className={classes.postList}>\r\n      { listOfPosts.length > 0 ? listOfPosts.map((post) => (<Post key={post} postID={post} />)) : <NoResults/>}\r\n    </div>\r\n  );\r\n\r\n  function checkParams(param) {\r\n    if(param.get('sortBy')){\r\n      sortBy(param.get('sortBy'));\r\n    }else if(param.get('likes')){\r\n      getLikedPosts();\r\n    }else if(param.get('technology')){\r\n      searchTechnology(param.get('technology'));\r\n    }else if(param.get('category')){\r\n      getByCategory(param.get('category'));\r\n    }else if(param.get('postID')){\r\n      setListOfPosts([param.get('postID')]);\r\n    }else{\r\n      getDefault();\r\n    }\r\n  }\r\n\r\n  function searchTechnology(technology){\r\n    axios.post(process.env.REACT_APP_API + \"/posts/search\", { pageNum: 1, technology }).then((response) => {\r\n      handleResults(response.data);\r\n    });\r\n  }\r\n  function sortBy(sortBy){\r\n    axios.post(process.env.REACT_APP_API + \"/posts/sort\", { pageNum: 1, sortBy }).then((response) => {\r\n      handleResults(response.data);\r\n    });\r\n  }\r\n  function getLikedPosts(){\r\n    axios.post(process.env.REACT_APP_API + \"/posts/liked\", { pageNum: 1 }, {withCredentials: true}).then((response) => {\r\n      handleResults(response.data);\r\n    });\r\n  }\r\n  function getByCategory(category){\r\n    axios.post(process.env.REACT_APP_API + \"/posts/category\", { pageNum: 1, categoryID: category }, {withCredentials: true}).then((response) => {\r\n      handleResults(response.data);\r\n    });\r\n  }\r\n  function getDefault(){\r\n    axios.post(process.env.REACT_APP_API + \"/posts/default\", { pageNum: 1 }).then((response) => {\r\n      handleResults(response.data);\r\n    });\r\n  }\r\n\r\n\r\n  function handleResults(results){\r\n    if(results.error){\r\n      console.log(\"Error: \", results.errorMessage);\r\n    }else{\r\n      setListOfPosts(results);\r\n    }\r\n  }\r\n}\r\n\r\nexport default PostList;\r\n"]},"metadata":{},"sourceType":"module"}