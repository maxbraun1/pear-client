{"ast":null,"code":"import _slicedToArray from\"C:\\\\Dev\\\\MERN-Project\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import NavBar from\"../components/layout/navBar\";import classes from\"./Submit.module.css\";import axios from'axios';import PageContainer from'../components/layout/page-container';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Register(){var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categoriesList=_useState2[0],setCategoriesList=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),technologiesBoxValue=_useState4[0],setTechnologiesBoxValue=_useState4[1];// Form States\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setDescription=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),technologies=_useState12[0],setTechnologies=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),postImage=_useState14[0],setPostImage=_useState14[1];useEffect(function(){axios.get(process.env.REACT_APP_API+'/categories/').then(function(response){setCategoriesList(response.data);setCategory(response.data[0]._id);});},[]);function addTechnology(e){e.preventDefault();setTechnologies(technologies.concat(technologiesBoxValue));setTechnologiesBoxValue(\"\");}function handleCategorySelectChange(e){setCategory(e);}function addPostImage(newPostID){var formData=new FormData();// Update the formData object\nformData.append(\"postImage\",postImage,postImage.name);formData.append(\"postID\",newPostID);axios.post(process.env.REACT_APP_API+'/posts/addImage',formData,{withCredentials:true}).then(function(response){if(response.data.error===false){navigate(\"/feed\");}else{console.log(response.data.message);}});}function publish(e){// Prevent page reload\ne.preventDefault();// Create post Json Object\nvar post={title:title,description:description,category:category,technologies:technologies};axios.post(process.env.REACT_APP_API+'/posts/',post,{withCredentials:true}).then(function(response){if(response.data.error===false){if(postImage){addPostImage(response.data.newPostID);}else{navigate(\"/feed\");}}else{console.log(response.data);}});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(PageContainer,{children:[/*#__PURE__*/_jsx(\"div\",{className:classes.formContainer,children:/*#__PURE__*/_jsxs(\"div\",{className:classes.formWrapper,children:[/*#__PURE__*/_jsx(\"h1\",{className:classes.formTitle,children:\"New Idea\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.postForm,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setTitle(e.target.value);},placeholder:\"Idea Title\"}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){return setDescription(e.target.value);},className:classes.descTextArea,placeholder:\"Describe your idea...\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.categoryTechnologyContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.categoryArea,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category\"}),/*#__PURE__*/_jsx(\"select\",{onChange:function onChange(e){return handleCategorySelectChange(e.target.value);},className:classes.categorySelect,children:categoriesList.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category._id,children:category.name},category._id);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.technologiesArea,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Technologies\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.addedTechnologies,children:technologies.length>0?technologies.map(function(technology,index){return/*#__PURE__*/_jsx(\"span\",{className:classes.technology,children:technology},index);}):\"No technologies\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.technologyForm,children:[/*#__PURE__*/_jsx(\"input\",{className:classes.technologyEnterBox,type:\"text\",onChange:function onChange(e){return setTechnologiesBoxValue(e.target.value);},placeholder:\"Enter Tag\",value:technologiesBoxValue||\"\"}),/*#__PURE__*/_jsx(\"button\",{onClick:addTechnology,children:\"Add\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.imageUpload,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Add an Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){setPostImage(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.publishArea,children:/*#__PURE__*/_jsx(\"button\",{onClick:publish,children:\"Publish Post\"})})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:classes.formInfo})]})]});}export default Register;","map":{"version":3,"sources":["C:/Dev/MERN-Project/client/src/pages/Submit.js"],"names":["useState","useEffect","useNavigate","NavBar","classes","axios","PageContainer","Register","navigate","categoriesList","setCategoriesList","technologiesBoxValue","setTechnologiesBoxValue","title","setTitle","description","setDescription","category","setCategory","technologies","setTechnologies","postImage","setPostImage","get","process","env","REACT_APP_API","then","response","data","_id","addTechnology","e","preventDefault","concat","handleCategorySelectChange","addPostImage","newPostID","formData","FormData","append","name","post","withCredentials","error","console","log","message","publish","formContainer","formWrapper","formTitle","postForm","target","value","descTextArea","categoryTechnologyContainer","categoryArea","categorySelect","map","technologiesArea","addedTechnologies","length","technology","index","technologyForm","technologyEnterBox","imageUpload","files","publishArea","formInfo"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport NavBar from \"../components/layout/navBar\";\r\nimport classes from \"./Submit.module.css\"\r\nimport axios from 'axios';\r\nimport PageContainer from '../components/layout/page-container';\r\n\r\nfunction Register() {\r\n    const navigate = useNavigate();\r\n    const [categoriesList, setCategoriesList] = useState([]);\r\n    const [technologiesBoxValue, setTechnologiesBoxValue] = useState(null);\r\n\r\n    // Form States\r\n    const [title, setTitle] = useState(null);\r\n    const [description, setDescription] = useState(null);\r\n    const [category, setCategory] = useState(null);\r\n    const [technologies,setTechnologies] = useState([]);\r\n    const [postImage,setPostImage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        axios.get(process.env.REACT_APP_API + '/categories/').then(function (response) {\r\n            setCategoriesList(response.data);\r\n            setCategory(response.data[0]._id);\r\n        })\r\n    },[]);\r\n\r\n    function addTechnology(e){\r\n        e.preventDefault();\r\n        setTechnologies(technologies.concat(technologiesBoxValue));\r\n        setTechnologiesBoxValue(\"\");\r\n    }\r\n\r\n    function handleCategorySelectChange(e){\r\n        setCategory(e);\r\n    }\r\n\r\n    function addPostImage(newPostID){\r\n        const formData = new FormData();\r\n    \r\n        // Update the formData object\r\n        formData.append(\r\n            \"postImage\",\r\n            postImage,\r\n            postImage.name\r\n        );\r\n        formData.append(\"postID\",newPostID);\r\n\r\n        axios.post(process.env.REACT_APP_API + '/posts/addImage', formData ,{withCredentials: true}).then(function (response) {\r\n            if(response.data.error === false){\r\n                navigate(\"/feed\");\r\n            }else{\r\n                console.log(response.data.message)\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    function publish(e){\r\n        // Prevent page reload\r\n        e.preventDefault();\r\n    \r\n        // Create post Json Object\r\n        const post = {\r\n          title: title,\r\n          description: description,\r\n          category: category,\r\n          technologies: technologies\r\n        };\r\n    \r\n        axios.post(process.env.REACT_APP_API + '/posts/', post ,{withCredentials: true}).then(function (response) {\r\n            if(response.data.error === false){\r\n                if(postImage){\r\n                    addPostImage(response.data.newPostID);\r\n                }else{\r\n                    navigate(\"/feed\");\r\n                }\r\n            }else{\r\n                console.log(response.data)\r\n            }\r\n        })\r\n      }\r\n  return (\r\n    <div>\r\n      <NavBar/>\r\n      <PageContainer>\r\n          <div className={classes.formContainer}>\r\n            <div className={classes.formWrapper}>\r\n                <h1 className={classes.formTitle}>New Idea</h1>\r\n                <form className={classes.postForm}>\r\n                    <input type=\"text\" onChange={(e) => setTitle(e.target.value)} placeholder='Idea Title'/>\r\n                    <textarea onChange={(e) => setDescription(e.target.value)} className={classes.descTextArea} placeholder='Describe your idea...'></textarea>\r\n                    <div className={classes.categoryTechnologyContainer}>\r\n                        <div className={classes.categoryArea}>\r\n                            <label>Category</label>\r\n                            <select onChange={(e) => handleCategorySelectChange(e.target.value)} className={classes.categorySelect}>\r\n                                {categoriesList.map((category) => <option key={category._id} value={category._id}>{category.name}</option>)}\r\n                            </select>\r\n                        </div>\r\n                        <div className={classes.technologiesArea}>\r\n                            <label>Technologies</label>\r\n                            <div className={classes.addedTechnologies}>{ technologies.length > 0 ? technologies.map((technology,index)=><span key={index} className={classes.technology}>{technology}</span>) : \"No technologies\"}</div>\r\n                            <div className={classes.technologyForm}>\r\n                                <input className={classes.technologyEnterBox} type=\"text\" onChange={(e) => setTechnologiesBoxValue(e.target.value)} placeholder=\"Enter Tag\" value={technologiesBoxValue || \"\"}/>\r\n                                <button onClick={addTechnology}>Add</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className={classes.imageUpload}>\r\n                        <label>Add an Image</label>\r\n                        <input type=\"file\" onChange={(e)=> {setPostImage(e.target.files[0])}} />\r\n                    </div>\r\n                    <div className={classes.publishArea}>\r\n                        <button onClick={publish}>Publish Post</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n          </div>\r\n          <div className={classes.formInfo}>\r\n            \r\n          </div>\r\n      </PageContainer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}